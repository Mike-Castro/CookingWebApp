<?php
function getIndexResults($cache) {
    if ($cache) {
        $json_data = '{"results":[{"id":795751,"title":"Chicken Fajita Stuffed Bell Pepper","image":"https://spoonacular.com/recipeImages/795751-312x231.jpg","imageType":"jpg"},{"id":640062,"title":"Corn Avocado Salsa","image":"https://spoonacular.com/recipeImages/640062-312x231.jpg","imageType":"jpg"},{"id":715421,"title":"Cheesy Chicken Enchilada Quinoa Casserole","image":"https://spoonacular.com/recipeImages/715421-312x231.jpg","imageType":"jpg"},{"id":715543,"title":"Homemade Guacamole","image":"https://spoonacular.com/recipeImages/715543-312x231.jpg","imageType":"jpg"},{"id":651977,"title":"Mini Stuffed Mexican Bell Peppers","image":"https://spoonacular.com/recipeImages/651977-312x231.jpg","imageType":"jpg"},{"id":715533,"title":"Filet Mignon Soft Tacos","image":"https://spoonacular.com/recipeImages/715533-312x231.jpg","imageType":"jpg"},{"id":975070,"title":"Instant Pot Chicken Taco Soup","image":"https://spoonacular.com/recipeImages/975070-312x231.jpg","imageType":"jpg"},{"id":715391,"title":"Slow Cooker Chicken Taco Soup","image":"https://spoonacular.com/recipeImages/715391-312x231.jpg","imageType":"jpg"},{"id":640117,"title":"Corn-Crusted Fish Tacos With Jalapeno-Lime Sauce and Spicy Black Beans","image":"https://spoonacular.com/recipeImages/640117-312x231.jpg","imageType":"jpg"},{"id":645856,"title":"Grilled Salmon With Cherry, Pineapple, Mango Salsa","image":"https://spoonacular.com/recipeImages/645856-312x231.jpg","imageType":"jpg"}],"offset":0,"number":10,"totalResults":180}';
    } else {
        $api_url = 'https://api.spoonacular.com/recipes/complexSearch?apiKey=' . $_ENV["APIKEY"] . '&cuisine=mexican';
        $json_data = file_get_contents($api_url);
    }
    $response_data = json_decode($json_data);
    $recipies = $response_data->results;
    return $recipies;
}

function getSearchResults($search, $cache) {
    if ($cache) {
        $json_data = '{"results":[{"id":716426,"title":"Cauliflower, Brown Rice, and Vegetable Fried Rice","image":"https://spoonacular.com/recipeImages/716426-312x231.jpg","imageType":"jpg"},{"id":715594,"title":"Homemade Garlic and Basil French Fries","image":"https://spoonacular.com/recipeImages/715594-312x231.jpg","imageType":"jpg"},{"id":715497,"title":"Berry Banana Breakfast Smoothie","image":"https://spoonacular.com/recipeImages/715497-312x231.jpg","imageType":"jpg"},{"id":644387,"title":"Garlicky Kale","image":"https://spoonacular.com/recipeImages/644387-312x231.jpg","imageType":"jpg"},{"id":715392,"title":"Easy Slow Cooker Chicken Tortilla Soup","image":"https://spoonacular.com/recipeImages/715392-312x231.jpg","imageType":"jpg"},{"id":716268,"title":"African Chicken Peanut Stew","image":"https://spoonacular.com/recipeImages/716268-312x231.jpg","imageType":"jpg"},{"id":716381,"title":"Nigerian Snail Stew","image":"https://spoonacular.com/recipeImages/716381-312x231.jpg","imageType":"jpg"},{"id":782601,"title":"Red Kidney Bean Jambalaya","image":"https://spoonacular.com/recipeImages/782601-312x231.jpg","imageType":"jpg"},{"id":794349,"title":"Broccoli and Chickpea Rice Salad","image":"https://spoonacular.com/recipeImages/794349-312x231.jpg","imageType":"jpg"},{"id":715446,"title":"Slow Cooker Beef Stew","image":"https://spoonacular.com/recipeImages/715446-312x231.jpg","imageType":"jpg"}],"offset":0,"number":10,"totalResults":5076}';
    } else {
        $api_url = 'https://api.spoonacular.com/recipes/complexSearch?apiKey=' . $_ENV["APIKEY"] . '&query=' . $search;
        $json_data = file_get_contents($api_url);
    }
    $response_data = json_decode($json_data);
    $recipies = $response_data->results;
    return $recipies;
}

function getRecipie($id, $cache) {
    if ($cache) {
        $json_data = '{"vegetarian":false,"vegan":false,"glutenFree":true,"dairyFree":true,"veryHealthy":true,"cheap":false,"veryPopular":false,"sustainable":false,"weightWatcherSmartPoints":2,"gaps":"no","lowFodmap":false,"aggregateLikes":7,"spoonacularScore":95.0,"healthScore":92.0,"creditsText":"Foodista.com – The Cooking Encyclopedia Everyone Can Edit","license":"CC BY 3.0","sourceName":"Foodista","pricePerServing":641.51,"extendedIngredients":[{"id":10211821,"aisle":"Produce","image":"yellow-bell-pepper.jpg","consistency":"solid","name":"bell peppers","nameClean":"bell pepper","original":"20 mini bell peppers (you can buy in a large bag)","originalString":"20 mini bell peppers (you can buy in a large bag)","originalName":"20 mini bell peppers (you can buy in a large bag)","amount":20.0,"unit":"large","meta":["mini","canned","(you can buy in a large bag)"],"metaInformation":["mini","canned","(you can buy in a large bag)"],"measures":{"us":{"amount":20.0,"unitShort":"large","unitLong":"larges"},"metric":{"amount":20.0,"unitShort":"large","unitLong":"larges"}}},{"id":16018,"aisle":"Canned and Jarred","image":"black-beans.jpg","consistency":"solid","name":"canned black beans","nameClean":"canned black beans","original":"7 oz canned black beans ( about 1/2 a can)","originalString":"7 oz canned black beans ( about 1/2 a can)","originalName":"canned black beans ( about 1/2 a can)","amount":7.0,"unit":"oz","meta":["canned","()"],"metaInformation":["canned","()"],"measures":{"us":{"amount":7.0,"unitShort":"oz","unitLong":"ounces"},"metric":{"amount":198.447,"unitShort":"g","unitLong":"grams"}}},{"id":2009,"aisle":"Spices and Seasonings","image":"chili-powder.jpg","consistency":"solid","name":"chili powder","nameClean":"chili powder","original":"1 TBSP Chili Powder","originalString":"1 TBSP Chili Powder","originalName":"Chili Powder","amount":1.0,"unit":"TBSP","meta":[],"metaInformation":[],"measures":{"us":{"amount":1.0,"unitShort":"Tbsp","unitLong":"Tbsp"},"metric":{"amount":1.0,"unitShort":"Tbsp","unitLong":"Tbsp"}}},{"id":99223,"aisle":"Canned and Jarred;Ethnic Foods","image":"canned-chipotle.png","consistency":"solid","name":"chipotles in adobo","nameClean":"canned chipotle chile","original":"3 oz chipotles in adobo ( about 1/2 a can)","originalString":"3 oz chipotles in adobo ( about 1/2 a can)","originalName":"chipotles in adobo ( about 1/2 a can)","amount":3.0,"unit":"oz","meta":["()"],"metaInformation":["()"],"measures":{"us":{"amount":3.0,"unitShort":"oz","unitLong":"ounces"},"metric":{"amount":85.049,"unitShort":"g","unitLong":"grams"}}},{"id":98849,"aisle":"Canned and Jarred","image":"tomatoes-canned.png","consistency":"solid","name":"fire roasted canned tomatoes","nameClean":"fire roasted tomatoes","original":"7 oz canned fire roasted tomatoes ( about 1/2 a can)","originalString":"7 oz canned fire roasted tomatoes ( about 1/2 a can)","originalName":"canned fire roasted tomatoes ( about 1/2 a can)","amount":7.0,"unit":"oz","meta":["fire roasted","canned","()"],"metaInformation":["fire roasted","canned","()"],"measures":{"us":{"amount":7.0,"unitShort":"oz","unitLong":"ounces"},"metric":{"amount":198.447,"unitShort":"g","unitLong":"grams"}}},{"id":11215,"aisle":"Produce","image":"garlic.png","consistency":"solid","name":"garlic","nameClean":"garlic","original":"1 tablespoon minced garlic","originalString":"1 tablespoon minced garlic","originalName":"minced garlic","amount":1.0,"unit":"tablespoon","meta":["minced"],"metaInformation":["minced"],"measures":{"us":{"amount":1.0,"unitShort":"Tbsp","unitLong":"Tbsp"},"metric":{"amount":1.0,"unitShort":"Tbsp","unitLong":"Tbsp"}}},{"id":31015,"aisle":"Produce","image":"chili-peppers-green.jpg","consistency":"solid","name":"green chilies","nameClean":"green chili pepper","original":"4 oz can green chilies","originalString":"4 oz can green chilies","originalName":"green chilies","amount":4.0,"unit":"oz","meta":["green","canned"],"metaInformation":["green","canned"],"measures":{"us":{"amount":4.0,"unitShort":"oz","unitLong":"ounces"},"metric":{"amount":113.398,"unitShort":"g","unitLong":"grams"}}},{"id":1002013,"aisle":"Spices and Seasonings","image":"ground-coriander.jpg","consistency":"solid","name":"ground coriander","nameClean":"ground coriander","original":"1 TSP Ground Coriander","originalString":"1 TSP Ground Coriander","originalName":"TSP Ground Coriander","amount":1.0,"unit":"","meta":[],"metaInformation":[],"measures":{"us":{"amount":1.0,"unitShort":"","unitLong":""},"metric":{"amount":1.0,"unitShort":"","unitLong":""}}},{"id":1002014,"aisle":"Spices and Seasonings","image":"ground-cumin.jpg","consistency":"solid","name":"ground cumin","nameClean":"cumin","original":"1 TBSP Ground Cumin","originalString":"1 TBSP Ground Cumin","originalName":"Ground Cumin","amount":1.0,"unit":"TBSP","meta":[],"metaInformation":[],"measures":{"us":{"amount":1.0,"unitShort":"Tbsp","unitLong":"Tbsp"},"metric":{"amount":1.0,"unitShort":"Tbsp","unitLong":"Tbsp"}}},{"id":5662,"aisle":"Meat","image":"meat-ground.jpg","consistency":"solid","name":"lean ground turkey","nameClean":"ground turkey","original":"10 oz lean ground turkey","originalString":"10 oz lean ground turkey","originalName":"lean ground turkey","amount":10.0,"unit":"oz","meta":["lean"],"metaInformation":["lean"],"measures":{"us":{"amount":10.0,"unitShort":"oz","unitLong":"ounces"},"metric":{"amount":283.495,"unitShort":"g","unitLong":"grams"}}},{"id":2028,"aisle":"Spices and Seasonings","image":"paprika.jpg","consistency":"solid","name":"paprika","nameClean":"paprika","original":"1 TBSP Paprika","originalString":"1 TBSP Paprika","originalName":"Paprika","amount":1.0,"unit":"TBSP","meta":[],"metaInformation":[],"measures":{"us":{"amount":1.0,"unitShort":"Tbsp","unitLong":"Tbsp"},"metric":{"amount":1.0,"unitShort":"Tbsp","unitLong":"Tbsp"}}},{"id":11954,"aisle":"Produce","image":"tomatillos.jpg","consistency":"solid","name":"tomatillos","nameClean":"tomatillos","original":"3 tomatillos","originalString":"3 tomatillos","originalName":"tomatillos","amount":3.0,"unit":"","meta":[],"metaInformation":[],"measures":{"us":{"amount":3.0,"unitShort":"","unitLong":""},"metric":{"amount":3.0,"unitShort":"","unitLong":""}}},{"id":10511282,"aisle":"Produce","image":"brown-onion.png","consistency":"solid","name":"yellow onion","nameClean":"yellow onion","original":"1/2 yellow onion","originalString":"1/2 yellow onion","originalName":"yellow onion","amount":0.5,"unit":"","meta":["yellow"],"metaInformation":["yellow"],"measures":{"us":{"amount":0.5,"unitShort":"","unitLong":""},"metric":{"amount":0.5,"unitShort":"","unitLong":""}}}],"id":651977,"title":"Mini Stuffed Mexican Bell Peppers","readyInMinutes":45,"servings":4,"sourceUrl":"http://www.foodista.com/recipe/38MTWCZ5/mini-stuffed-mexican-bell-peppers","image":"https://spoonacular.com/recipeImages/651977-556x370.jpg","imageType":"jpg","summary":"The recipe Mini Stuffed Mexican Bell Peppers could satisfy your Mexican craving in around <b>45 minutes</b>. Watching your figure? This gluten free and dairy free recipe has <b>367 calories</b>, <b>28g of protein</b>, and <b>5g of fat</b> per serving. For <b>$5.22 per serving</b>, you get a side dish that serves 4. Not a lot of people made this recipe, and 7 would say it hit the spot. Head to the store and pick up onion, chipotles in adobo, chili powder, and a few other things to make it today. All things considered, we decided this recipe <b>deserves a spoonacular score of 94%</b>. This score is spectacular. Try <a href=\"https://spoonacular.com/recipes/mexican-stuffed-bell-peppers-723624\">Mexican Stuffed Bell Peppers</a>, <a href=\"https://spoonacular.com/recipes/jerk-chicken-and-stuffed-mini-bell-peppers-217041\">Jerk Chicken and Stuffed Mini Bell Peppers</a>, and <a href=\"https://spoonacular.com/recipes/goat-cheese-stuffed-mini-bell-peppers-619765\">Goat Cheese Stuffed Mini Bell Peppers</a> for similar recipes.","cuisines":["Mexican"],"dishTypes":["lunch","main course","main dish","dinner"],"diets":["gluten free","dairy free"],"occasions":[],"winePairing":{"pairedWines":["pinot noir","riesling","sparkling rose"],"pairingText":"Pinot Noir, Riesling, and Sparkling rosé are great choices for Mexican. Acidic white wines like riesling or low-tannin reds like pinot noir can work well with Mexican dishes. Sparkling rosé is a safe pairing too. You could try Byron Fiddlestix Vineyard Pinot Noir. Reviewers quite like it with a 5 out of 5 star rating and a price of about 45 dollars per bottle.","productMatches":[{"id":476536,"title":"Byron Fiddlestix Vineyard Pinot Noir","description":"The 2016 Fiddlestix Vineyard Pinot Noir shows violet and blueberry characteristics, along with earth, hints of black tea and a long smoky finish.\nVegan","price":"$44.99","imageUrl":"https://spoonacular.com/productImages/476536-312x231.jpg","averageRating":1.0,"ratingCount":6.0,"score":0.9473684210526316,"link":"https://click.linksynergy.com/deeplink?id=*QCiIS6t4gA&mid=2025&murl=https%3A%2F%2Fwww.wine.com%2Fproduct%2Fbyron-fiddlestix-vineyard-pinot-noir-2016%2F530491"}]},"instructions":"<ol><li>1. Roast the vegetables:  Preheat oven to 400 degrees.Cut the tomatillos in half, slice the onion into 1/2 in slices and remove garlic from covering. Place on baking sheet. Roast till tomatillos are tender and start to brown, about 20 minutes.</li><li>2. Meanwhile,make the sauce: Add tomatillos, onion, garlic, tomatoes, green chilies, chipotles, chili powder, cumin, paprika, and coriander to blender or food processor. Blend until smooth.</li><li>3. In a large bowel, add the turkey, beans, and sauce, Mix together until everything is evenly distributed.</li><li>4. Cut tops off mini bell peppers and remove any seeds. Stuff turkey mixture into peppers until slightly overflowing. Place in 9 by 13 glass dish. Repeat for all bell peppers.</li><li>5. Cook at 400 for 20 minutes. For the last 5 minutes, turn on the broiler and get some color on the peppers.</li><li>6. Serve with your favorite salsa (used my Pico De Gallo from my tortilla soup), sour cream and avocado.</li><li>ENJOY!</li></ol>","analyzedInstructions":[{"name":"","steps":[{"number":1,"step":"Roast the vegetables:  Preheat oven to 400 degrees.","ingredients":[{"id":11583,"name":"vegetable","localizedName":"vegetable","image":"mixed-vegetables.png"}],"equipment":[{"id":404784,"name":"oven","localizedName":"oven","image":"oven.jpg"}]},{"number":2,"step":"Cut the tomatillos in half, slice the onion into 1/2 in slices and remove garlic from covering.","ingredients":[{"id":11954,"name":"tomatillos","localizedName":"tomatillos","image":"tomatillos.jpg"},{"id":11215,"name":"garlic","localizedName":"garlic","image":"garlic.png"},{"id":11282,"name":"onion","localizedName":"onion","image":"brown-onion.png"}],"equipment":[]},{"number":3,"step":"Place on baking sheet. Roast till tomatillos are tender and start to brown, about 20 minutes.","ingredients":[{"id":11954,"name":"tomatillos","localizedName":"tomatillos","image":"tomatillos.jpg"}],"equipment":[{"id":404727,"name":"baking sheet","localizedName":"baking sheet","image":"baking-sheet.jpg"}],"length":{"number":20,"unit":"minutes"}}]},{"name":"Meanwhile,make the sauce","steps":[{"number":1,"step":"Add tomatillos, onion, garlic, tomatoes, green chilies, chipotles, chili powder, cumin, paprika, and coriander to blender or food processor. Blend until smooth.","ingredients":[{"id":31015,"name":"green chili pepper","localizedName":"green chili pepper","image":"chili-peppers-green.jpg"},{"id":2009,"name":"chili powder","localizedName":"chili powder","image":"chili-powder.jpg"},{"id":11954,"name":"tomatillos","localizedName":"tomatillos","image":"tomatillos.jpg"},{"id":98839,"name":"chipotle chiles","localizedName":"chipotle chiles","image":"chile-chipotle.jpg"},{"id":1012013,"name":"coriander","localizedName":"coriander","image":"ground-coriander.jpg"},{"id":11529,"name":"tomato","localizedName":"tomato","image":"tomato.png"},{"id":2028,"name":"paprika","localizedName":"paprika","image":"paprika.jpg"},{"id":11215,"name":"garlic","localizedName":"garlic","image":"garlic.png"},{"id":1002014,"name":"cumin","localizedName":"cumin","image":"ground-cumin.jpg"},{"id":11282,"name":"onion","localizedName":"onion","image":"brown-onion.png"}],"equipment":[{"id":404771,"name":"food processor","localizedName":"food processor","image":"food-processor.png"},{"id":404726,"name":"blender","localizedName":"blender","image":"blender.png"}]},{"number":2,"step":"In a large bowel, add the turkey, beans, and sauce,","ingredients":[{"id":5165,"name":"whole turkey","localizedName":"whole turkey","image":"turkey-raw-whole.jpg"},{"id":0,"name":"beans","localizedName":"beans","image":"kidney-beans.jpg"},{"id":0,"name":"sauce","localizedName":"sauce","image":""}],"equipment":[]},{"number":3,"step":"Mix together until everything is evenly distributed.","ingredients":[],"equipment":[]},{"number":4,"step":"Cut tops off mini bell peppers and remove any seeds. Stuff turkey mixture into peppers until slightly overflowing.","ingredients":[{"id":10311821,"name":"mini peppers","localizedName":"mini peppers","image":"yellow-bell-pepper.jpg"},{"id":10111333,"name":"peppers","localizedName":"peppers","image":"green-pepper.jpg"},{"id":5165,"name":"whole turkey","localizedName":"whole turkey","image":"turkey-raw-whole.jpg"},{"id":93818,"name":"seeds","localizedName":"seeds","image":"sunflower-seeds.jpg"}],"equipment":[]},{"number":5,"step":"Place in 9 by 13 glass dish. Repeat for all bell peppers.","ingredients":[{"id":10211821,"name":"bell pepper","localizedName":"bell pepper","image":"bell-pepper-orange.png"}],"equipment":[]},{"number":6,"step":"Cook at 400 for 20 minutes. For the last 5 minutes, turn on the broiler and get some color on the peppers.","ingredients":[{"id":10111333,"name":"peppers","localizedName":"peppers","image":"green-pepper.jpg"}],"equipment":[{"id":405914,"name":"broiler","localizedName":"broiler","image":"oven.jpg"}],"length":{"number":25,"unit":"minutes"}},{"number":7,"step":"Serve with your favorite salsa (used my Pico De Gallo from my tortilla soup), sour cream and avocado.ENJOY!","ingredients":[{"id":27027,"name":"pico de gallo","localizedName":"pico de gallo","image":"pico-de-gallo.png"},{"id":0,"name":"tortilla soup","localizedName":"tortilla soup","image":""},{"id":1056,"name":"sour cream","localizedName":"sour cream","image":"sour-cream.jpg"},{"id":9037,"name":"avocado","localizedName":"avocado","image":"avocado.jpg"},{"id":6164,"name":"salsa","localizedName":"salsa","image":"salsa.png"}],"equipment":[]}]}],"originalId":null,"spoonacularSourceUrl":"https://spoonacular.com/mini-stuffed-mexican-bell-peppers-651977"}';
    } else {
        $api_url = 'https://api.spoonacular.com/recipes/' . $id . '/information?apiKey=' . $_ENV["APIKEY"];
        $json_data = file_get_contents($api_url);
    }
    $response_data = json_decode($json_data);
    return $response_data;
}
